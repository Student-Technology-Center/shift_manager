{% load static %}
<html>
    <head>
        <title>
            Shift Manager
        </title>
        <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
        <link rel="stylesheet" type="text/css" href="{% static 'css/shift-index.css' %}" />
        <script>
            function validateForm(form_entry) {
                var rounds = parseInt(form_entry.rounds.value);
                var shifts = parseInt(form_entry.amt_per_round.value);
                if (isNaN(rounds) || isNaN(shifts)) {
                    $('#warning').text('Make sure the rounds and shifts per round are a number.')
                    return false;
                }
                return true;
            }
        </script>
    </head>
    <body>
        {% if user.is_superuser%}
            <div id='shift-form'>
                <a href='create/'>Go to in progress shift creation.</a>
                <h4>
                    Choose the users to participate.
                </h4>
                <p id='warning' style='color:red;'></p>
                <p>
                    The order you choose is not the order they go in - that is random and is determined by the server.
                    <br>
                    <br>
                    <em> -- Hitting 'submit' will start the whole process. -- </em>
                </p>
                <form id='names_form' action='.' method='POST' onsubmit='return validateForm(this);'>
                    {% csrf_token %}
                    Rounds:
                    <br>
                    <input name='rounds' type='text'>
                    <br>
                    <br>
                    Shifts per round:
                    <br> 
                    <input name='amt_per_round' type='text'>
                    <br>
                    <br>
                    From this date..
                    <br>
                    <input name='start_date' type='date'>
                    <br>
                    <br>
                    Until this date..
                    <br>
                    <input name='end_date' type='date'>
                    <div id='names'>
                        <ul>
                        {% for x in user_list %}
                            <li><input class='name-box' type='checkbox' name='{{x.username}}'> {{x.first_name}} {{x.last_name}} ({{x.username}}) </li>
                        {% endfor %}
                        </ul>
                    </div>
                    <input id='send_names' name='create_shifts' type='submit'>
                </form>
            </div>
        {% else %}
            <h4>Nothing going on here right now!</h4>
        {% endif %}
    </body>
</html>